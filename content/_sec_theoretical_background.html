<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.29">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Theoretical Background – IC Design of a Universal Biquad Filter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../content/_sec_characterisation.html" rel="next">
<link href="../content/_sec_introduction.html" rel="prev">
<link href="../images/hsb-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e22fbe6e69edb8577f7b7bd0719516f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../content/_sec_theoretical_background.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theoretical Background</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">IC Design of a Universal Biquad Filter</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/avahlen/AMCD_Group1" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../IC-Design-of-a-Universal-Biquad-Filter.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../IC-Design-of-a-Universal-Biquad-Filter.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abstract</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_theoretical_background.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theoretical Background</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_characterisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Characterisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_xschem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Xschem Simulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_finns_part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Integrated Layouting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/_sec_conclusion-outlook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../content/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliography</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#biquad-filter" id="toc-biquad-filter" class="nav-link active" data-scroll-target="#biquad-filter"><span class="header-section-number">2.1</span> Biquad filter</a>
  <ul class="collapse">
  <li><a href="#universal-biquad-filter" id="toc-universal-biquad-filter" class="nav-link" data-scroll-target="#universal-biquad-filter"><span class="header-section-number">2.1.1</span> Universal biquad filter</a></li>
  <li><a href="#characteristics" id="toc-characteristics" class="nav-link" data-scroll-target="#characteristics"><span class="header-section-number">2.1.2</span> Characteristics</a></li>
  </ul></li>
  <li><a href="#operational-amplifier" id="toc-operational-amplifier" class="nav-link" data-scroll-target="#operational-amplifier"><span class="header-section-number">2.2</span> Operational Amplifier</a>
  <ul class="collapse">
  <li><a href="#sec-VFA" id="toc-sec-VFA" class="nav-link" data-scroll-target="#sec-VFA"><span class="header-section-number">2.2.1</span> Voltage-Feedback Amplifiers (VFA)</a></li>
  <li><a href="#operational-transconductance-amplifier-ota" id="toc-operational-transconductance-amplifier-ota" class="nav-link" data-scroll-target="#operational-transconductance-amplifier-ota"><span class="header-section-number">2.2.2</span> Operational Transconductance Amplifier (OTA)</a></li>
  <li><a href="#sec-current_mirror" id="toc-sec-current_mirror" class="nav-link" data-scroll-target="#sec-current_mirror"><span class="header-section-number">2.2.3</span> Current Mirror</a></li>
  <li><a href="#sec-diff_pair" id="toc-sec-diff_pair" class="nav-link" data-scroll-target="#sec-diff_pair"><span class="header-section-number">2.2.4</span> Differential Pair</a></li>
  </ul></li>
  <li><a href="#mosfet-metal-oxide-semiconductor-field-effect-transistor" id="toc-mosfet-metal-oxide-semiconductor-field-effect-transistor" class="nav-link" data-scroll-target="#mosfet-metal-oxide-semiconductor-field-effect-transistor"><span class="header-section-number">2.3</span> MOSFET (Metal-Oxide-Semiconductor Field-Effect-Transistor )</a>
  <ul class="collapse">
  <li><a href="#mosfet-large-signal-regions" id="toc-mosfet-large-signal-regions" class="nav-link" data-scroll-target="#mosfet-large-signal-regions"><span class="header-section-number">2.3.1</span> MOSFET Large-Signal regions</a></li>
  <li><a href="#small-signal-representation" id="toc-small-signal-representation" class="nav-link" data-scroll-target="#small-signal-representation"><span class="header-section-number">2.3.2</span> Small-Signal Representation</a></li>
  </ul></li>
  <li><a href="#summary-of-g_mv_gs" id="toc-summary-of-g_mv_gs" class="nav-link" data-scroll-target="#summary-of-g_mv_gs"><span class="header-section-number">2.4</span> Summary of <span class="math inline">\(g_mv_{gs}\)</span></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theoretical Background</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This chapter introduces the theory and core concepts necessary for IC design of a biquad filter. It is structured in a way, that it goes from the big picture to the small components. First, biquad filters are introduced with a focus on the universal biquad filter. After that, operational amplifiers come into the the foreground, as biquad filters make use of them in their circuits. Operational amplifiers are looked upon from an IC design standpoint.</p>
<section id="biquad-filter" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="biquad-filter"><span class="header-section-number">2.1</span> Biquad filter</h2>
<p>The biquadratic filter, also known as the biquad filter, has its earliest implementation in the 1960s but is still in use today, most commonly in radio frequency receivers <span class="citation" data-cites="razavi2018">(<a href="references.html#ref-razavi2018" role="doc-biblioref">Razavi 2018</a>)</span>. In its application in RF-technology, it is used to remove unwanted neighboring signals ans noise <span class="citation" data-cites="razavi2024">(<a href="references.html#ref-razavi2024" role="doc-biblioref">Razavi 2024</a>)</span>. As biquad filter are second-order filters, they are also used as building blocks for higher filter implementations, by cascading them and adding first order filters <span class="citation" data-cites="aslkpro2012">(<a href="references.html#ref-aslkpro2012" role="doc-biblioref">Rao and Ravikumar 2012</a>)</span>.</p>
<section id="universal-biquad-filter" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="universal-biquad-filter"><span class="header-section-number">2.1.1</span> Universal biquad filter</h3>
<p>For the filter design in this project, an universal biquad filter is used. The universal biquad filter is biquad filter variant with four operational amplifiers used in its design and the property of being able to be used in four different filter variants. Depending on the output of the universal biquad used, a low pass filter, high pass filter, band pass filter, or band stop filter will be implemented. This can be seen in <a href="#fig-BiquadCircuit" class="quarto-xref">Figure&nbsp;<span>2.1</span></a>. <span class="citation" data-cites="aslkpro2012">(<a href="references.html#ref-aslkpro2012" role="doc-biblioref">Rao and Ravikumar 2012</a>)</span></p>
<div id="fig-BiquadCircuit" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-BiquadCircuit-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/biquad_circuit.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-BiquadCircuit-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.1: circuit design of an universal biquad filter
</figcaption>
</figure>
</div>
<p>The universal biquad filter consists of two non-inverting amplifiers working as adders in the circuit and two integrators. By setting <span class="math inline">\(R\)</span> and <span class="math inline">\(C\)</span> to specific values, the resonance frequency can be chosen. Other parameters adjustable in the universal biquad filter are the quality factor <span class="math inline">\(Q\)</span> and the low-frequency gain <span class="math inline">\(H_0\)</span>. The quality factor and low-frequency gain determine the frequency response peaks of the low pass filter and the band pass filter. <span class="citation" data-cites="aslkpro2012">(<a href="references.html#ref-aslkpro2012" role="doc-biblioref">Rao and Ravikumar 2012</a>)</span></p>
</section>
<section id="characteristics" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="characteristics"><span class="header-section-number">2.1.2</span> Characteristics</h3>
<p>As the universal biquad filter is a second order filter with the specified outputs low pass, high pass, band pass, and band stop, each filter option can be described with a tranfer function on system level. The general second order transfer function is:</p>
<p><span id="eq-TFSecondOrder"><span class="math display">\[
H(s) = \frac{a_1 s^2 + b_1 s + c_1}{a_2 s^2 + b_2 s + c_2}
\tag{2.1}\]</span></span></p>
<p>The coeffcients can be choosen so, that different responses, like low pass, high pass, band pass, and band stop are achieved.</p>
<p>In filter design a variant of this generalized transfer function is often choosen because it is easier describe the system by quality factor and angular frequency. <a href="#eq-TFSecondOrderBiquad" class="quarto-xref">Equation&nbsp;<span>2.2</span></a> is an exemplatory low pass filter with a transfer function specified for filter design. <span class="citation" data-cites="razavi2018">(<a href="references.html#ref-razavi2018" role="doc-biblioref">Razavi 2018</a>)</span></p>
<p><span id="eq-TFSecondOrderBiquad"><span class="math display">\[
H(s) = \frac{\omega_n^2}{s^2 + \frac{\omega_n}{Q} s + \omega_n^2}
\tag{2.2}\]</span></span></p>
<p><span class="math inline">\(Q\)</span> determines amoung other things the amount of peaking the transfer function has at the chosen frequency. <a href="#fig-lowPassDifferentQ" class="quarto-xref">Figure&nbsp;<span>2.2</span></a> shows this graphically, the amout of peaking increases with increasing quality factor <span class="math inline">\(Q\)</span>.</p>
<div id="lst-lowpassdifferentq" class="cell listing quarto-float quarto-figure quarto-figure-left anchored" data-caption="Python code for plotting a low pass with different quality factors" data-execution_count="1">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst quarto-uncaptioned" id="lst-lowpassdifferentq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;2.1
</figcaption>
<div aria-describedby="lst-lowpassdifferentq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Behavioral Analysis Biquad Filter</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initial values</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>f0 <span class="op">=</span> <span class="fl">1e3</span>  <span class="co"># Resonance frequency in Hz</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>w0 <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> f0  <span class="co"># Angular frequency in rad/s</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>Q1 <span class="op">=</span> <span class="dv">1</span>  <span class="co"># Quality factor</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Q2 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>Q3 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>Q4 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>Q5 <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>H0 <span class="op">=</span> <span class="dv">1</span>  <span class="co"># Play around with this later</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Logarithmic frequency axis</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>frequencies <span class="op">=</span> np.logspace(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">10000</span>)  <span class="co"># Frequency from 10^2 to 10^4 Hz</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="ot">1j</span> <span class="op">*</span> <span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> frequencies  <span class="co"># Laplace-Variable s = jω</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">############################################</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Transfer functions of Active Filters</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">############################################</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">### Numerator</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Low Pass Filter</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>b_lp <span class="op">=</span> H0</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># High Pass Filter</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co">#b_hp = (H0 * (s**2 / w0**2))</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Band Pass Filter</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co">#b_bp = (-H0 * (s / w0))</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Band Stop Filter</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co">#b_bs = -((1 + (s**2 / (w0**2))) * H0)</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Denominator -&gt; for all filters the same</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>a0 <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>a1_1 <span class="op">=</span> (s <span class="op">/</span> (w0 <span class="op">*</span> Q1))</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>a1_2 <span class="op">=</span> (s <span class="op">/</span> (w0 <span class="op">*</span> Q2))</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>a1_3 <span class="op">=</span> (s <span class="op">/</span> (w0 <span class="op">*</span> Q3))</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>a1_4 <span class="op">=</span> (s <span class="op">/</span> (w0 <span class="op">*</span> Q4))</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>a1_5 <span class="op">=</span> (s <span class="op">/</span> (w0 <span class="op">*</span> Q5))</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> (s<span class="op">**</span><span class="dv">2</span> <span class="op">/</span> (w0<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>den1 <span class="op">=</span> a0 <span class="op">+</span> a1_1 <span class="op">+</span> a2</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>den2 <span class="op">=</span> a0 <span class="op">+</span> a1_2 <span class="op">+</span> a2</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>den3 <span class="op">=</span> a0 <span class="op">+</span> a1_3 <span class="op">+</span> a2</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>den4 <span class="op">=</span> a0 <span class="op">+</span> a1_4 <span class="op">+</span> a2</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>den5 <span class="op">=</span> a0 <span class="op">+</span> a1_5 <span class="op">+</span> a2</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co">############################################</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculation of the transfer functions H(s)</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co">############################################</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>Hs_lp_1 <span class="op">=</span> b_lp <span class="op">/</span> den1</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>Hs_lp_2 <span class="op">=</span> b_lp <span class="op">/</span> den2</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>Hs_lp_3 <span class="op">=</span> b_lp <span class="op">/</span> den3</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>Hs_lp_4 <span class="op">=</span> b_lp <span class="op">/</span> den4</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>Hs_lp_5 <span class="op">=</span> b_lp <span class="op">/</span> den5</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="co">#Hs_hp = b_hp / den</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co">#Hs_bp = b_bp / den</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">#Hs_bs = b_bs / den</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Bode Diagram</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.suptitle("frequency response of biquad filter")</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Low Pass Filter</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].semilogx(frequencies, <span class="dv">20</span> <span class="op">*</span> np.log10(np.<span class="bu">abs</span>(Hs_lp_1)), label<span class="op">=</span><span class="st">'$Q = 1$'</span>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].semilogx(frequencies, np.unwrap(np.angle(Hs_lp_1)) <span class="op">*</span> (<span class="dv">180</span> <span class="op">/</span> np.pi), label<span class="op">=</span><span class="st">'$Q = 1$'</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].semilogx(frequencies, <span class="dv">20</span> <span class="op">*</span> np.log10(np.<span class="bu">abs</span>(Hs_lp_2)), label<span class="op">=</span><span class="st">'$Q = 2$'</span>)</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].semilogx(frequencies, np.unwrap(np.angle(Hs_lp_2)) <span class="op">*</span> (<span class="dv">180</span> <span class="op">/</span> np.pi), label<span class="op">=</span><span class="st">'$Q = 2$'</span>)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].semilogx(frequencies, <span class="dv">20</span> <span class="op">*</span> np.log10(np.<span class="bu">abs</span>(Hs_lp_3)), label<span class="op">=</span><span class="st">'$Q = 5$'</span>)</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].semilogx(frequencies, np.unwrap(np.angle(Hs_lp_3)) <span class="op">*</span> (<span class="dv">180</span> <span class="op">/</span> np.pi), label<span class="op">=</span><span class="st">'$Q = 5$'</span>)</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].semilogx(frequencies, <span class="dv">20</span> <span class="op">*</span> np.log10(np.<span class="bu">abs</span>(Hs_lp_4)), label<span class="op">=</span><span class="st">'$Q = 10$'</span>)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].semilogx(frequencies, np.unwrap(np.angle(Hs_lp_4)) <span class="op">*</span> (<span class="dv">180</span> <span class="op">/</span> np.pi), label<span class="op">=</span><span class="st">'$Q = 10$'</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].semilogx(frequencies, <span class="dv">20</span> <span class="op">*</span> np.log10(np.<span class="bu">abs</span>(Hs_lp_5)), label<span class="op">=</span><span class="st">'$Q = 100$'</span>)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].semilogx(frequencies, np.unwrap(np.angle(Hs_lp_5)) <span class="op">*</span> (<span class="dv">180</span> <span class="op">/</span> np.pi), label<span class="op">=</span><span class="st">'$Q = 100$'</span>)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="co"># High Pass Filter</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="co">axs[0].semilogx(frequencies, 20 * np.log10(np.abs(Hs_hp)), label='high pass')</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="co">axs[1].semilogx(frequencies, np.unwrap(np.angle(Hs_hp)) * (180 / np.pi), label='high pass')</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Band Pass Filter</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co">axs[0].semilogx(frequencies, 20 * np.log10(np.abs(Hs_bp)), label='band pass')</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="co">axs[1].semilogx(frequencies, np.unwrap(np.angle(Hs_bp)) * (180 / np.pi), label='band pass')</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Band Stop Filter</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="co">axs[0].semilogx(frequencies, 20 * np.log10(np.abs(Hs_bs)), label='band stop')</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="co">axs[1].semilogx(frequencies, (np.angle(Hs_bs)) * (180 / np.pi), label='band stop')</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="co">#axs[0].title("amplitude response")</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_xlabel(<span class="st">"frequency/Hz"</span>)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_ylabel(<span class="st">"amplitude/dB"</span>)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="co">#axs[0].set_ylim(-50, 25)</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].grid(<span class="va">True</span>, which<span class="op">=</span><span class="st">"both"</span>, ls<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="co">#axs[1].title("phase response")</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_xlabel(<span class="st">"frequency/Hz"</span>)</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_ylabel(<span class="st">"phase/deg"</span>)</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].grid(<span class="va">True</span>, which<span class="op">=</span><span class="st">"both"</span>, ls<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].legend()</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">'../images/sec_theorectical_background/lowPassDifferentQ.png'</span>, <span class="bu">format</span><span class="op">=</span><span class="st">'png'</span>, dpi<span class="op">=</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</figure>
</div>
<div id="fig-lowPassDifferentQ" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lowPassDifferentQ-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/lowPassDifferentQ.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lowPassDifferentQ-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.2: Low pass filter with different quality factors
</figcaption>
</figure>
</div>
<p>The height of the peak can be calculated with:</p>
<p><span id="eq-calculatePeak"><span class="math display">\[
A_{peak} = \frac{Q}{\sqrt{1 - \frac{1}{4Q^2}}}
\tag{2.3}\]</span></span></p>
<p>For <span class="math inline">\(Q = 100\)</span> the peak is <span class="math inline">\(A_{peak} = 100.001\)</span>, which converted into dB is <span class="math inline">\(A_{peak,dB} = 40\,dB\)</span>, as is shown in <a href="#fig-lowPassDifferentQ" class="quarto-xref">Figure&nbsp;<span>2.2</span></a>.</p>
</section>
</section>
<section id="operational-amplifier" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="operational-amplifier"><span class="header-section-number">2.2</span> Operational Amplifier</h2>
<p>As seen in <a href="#fig-BiquadCircuit" class="quarto-xref">Figure&nbsp;<span>2.1</span></a> a Biquad Filter consists four Operational Amplifiers. To get a better understanding of these, this chapter will discuss the main arguments of OPAMPS. There are different types of operational amplifiers that differ, for example, by their low- or high-impedance inputs and outputs. According to Schmid there exist nine diffrent types of the Opamps, but only four are mainly used <span class="citation" data-cites="Approximating_OPAMP">(<a href="references.html#ref-Approximating_OPAMP" role="doc-biblioref">Schmid 2000</a>)</span>. This is because almost always, the non-inverting (positive) input is designed as a high-impedance voltage input. The inverting (negative) input can either be a high-impedance voltage input or a low-impedance current input, depending on the type. Accordingly, the output can be either a low-impedance voltage output or a high-impedance current output. This results in four basic configurations, as shown in the accompanying table <a href="#tbl-opamp_comapre" class="quarto-xref">Table&nbsp;<span>2.1</span></a>. (Images are taken from <span class="citation" data-cites="wiki_opams">Wikipedia (<a href="references.html#ref-wiki_opams" role="doc-biblioref">2025</a>)</span>)</p>
<div id="tbl-opamp_comapre" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-opamp_comapre-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.1: Four typicall Operational Amplifiers
</figcaption>
<div aria-describedby="tbl-opamp_comapre-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 42%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Voltage output</th>
<th>Current output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Voltage input</strong></td>
<td>Voltage-Feedback Amplifiers</td>
<td>Operational Transconductance Amplifier</td>
</tr>
<tr class="even">
<td></td>
<td><img src="../images/sec_theorectical_background/OpV_VV.png" class="img-fluid figure-img"></td>
<td><img src="../images/sec_theorectical_background/OpV_VC.png" class="img-fluid figure-img"></td>
</tr>
<tr class="odd">
<td><strong>Current input</strong></td>
<td>Current-Feedback Amplifiers</td>
<td>Current Amplifier</td>
</tr>
<tr class="even">
<td></td>
<td><img src="../images/sec_theorectical_background/OpV_CV.png" class="img-fluid figure-img"></td>
<td><img src="../images/sec_theorectical_background/OpV_CC.png" class="img-fluid figure-img"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>As a general rule, the simplest circuit that can do a job is usually the best choice. <span class="citation" data-cites="hpretlacd">(<a href="references.html#ref-hpretlacd" role="doc-biblioref">H. Pretl and Michael Koefinger 2025</a>)</span></p>
</div>
</div>
<section id="sec-VFA" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="sec-VFA"><span class="header-section-number">2.2.1</span> Voltage-Feedback Amplifiers (VFA)</h3>
<p>When discussing operational amplifiers (OPAMPs), most sources refer to the Voltage-Feedback Amplifier. These VFAs are <strong>voltage-controlled voltage sources</strong>, essentially acting as voltage boosters. They are characterized by a high-impedance input for both the non-inverting and inverting terminals, and a low-impedance voltage output. To realize various desired circuits, such as amplification, integration, addition/subtraction, etc…, these functions should ideally be achieved only through the surrounding circuitry. To meet this requirement, three main requirements need be satisfied:</p>
<ul>
<li><strong>Extremely High Voltage Gain</strong>: Typically ranging from 60 to 120 dB (or gain factor of <span class="math inline">\(10^4\)</span> to <span class="math inline">\(10^6\)</span>), this gain should be available over a wide frequency range.</li>
<li><strong>High Impedance at Differential Inputs</strong>: Ensuring minimal loading of the signal source.</li>
<li><strong>Low Impedance at the Output</strong>: Allowing the amplifier to drive various loads without significant voltage drop.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difference between a voltage source and a current source
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Voltage source</strong><br>
A voltage source creates a constant voltage output by changing the current.</p>
<p><strong>Current source</strong> A current source creates a constant current by changing the voltage.</p>
<p>Both of this sources can be explained by Ohms-Law: <span class="math inline">\(R = \frac{U}{I}\)</span>.</p>
<p>For example the voltage source: There is no influence of the load, so <span class="math inline">\(R\)</span> may change and its value is unknown to the source. So to keep the voltage stable we can only change the current.</p>
</div>
</div>
</section>
<section id="operational-transconductance-amplifier-ota" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="operational-transconductance-amplifier-ota"><span class="header-section-number">2.2.2</span> Operational Transconductance Amplifier (OTA)</h3>
<p>In the design process of the biquad only OTAs will be used, so the focus of this chapter will be on them. The operational transconductance amplifier puts out out a current proportional to its input voltage, unlike Voltage Feedback Amplifiers <a href="#sec-VFA" class="quarto-xref"><span>Section 2.2.1</span></a>. In other words an OTA is a <strong>voltage controlled current source</strong>.</p>
<div id="fig-otasym" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-otasym-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/ota_symbol.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-otasym-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.3: Schematic symbol of an OTA (taken from <span class="citation" data-cites="Wangenheim2007">Wangenheim (<a href="references.html#ref-Wangenheim2007" role="doc-biblioref">2007</a>)</span>)
</figcaption>
</figure>
</div>
<p>As seen in the figure <a href="#fig-otasym" class="quarto-xref">Figure&nbsp;<span>2.3</span></a> the OTA has the two differental inputs and a current output. On top of that it has a biasing current input <span class="math inline">\(I_{bias}\)</span> which controls the transconductance <span class="math inline">\(g_m\)</span> of the OTA.</p>
<section id="transconductance" class="level4" data-number="2.2.2.1">
<h4 data-number="2.2.2.1" class="anchored" data-anchor-id="transconductance"><span class="header-section-number">2.2.2.1</span> Transconductance</h4>
<p>Transconductance is a fundamental parameter that describes the relationship between the input voltage and the output current in electronic devices, particularly in transistors. It is defined as the ratio of the change in output current to the change in input voltage, under conditions where all other variables are held constant. Mathematically, it is expressed as:</p>
<p><span class="math display">\[
g_m = \frac{\Delta I_{out}}{\Delta V_{in}}
\]</span></p>
<p>where <span class="math inline">\(g_m\)</span> is the transconductance, <span class="math inline">\(\Delta I_{out}\)</span> is the change in output current, and <span class="math inline">\(\Delta V_{in}\)</span> is the change in input voltage. The unit of transconductance is the siemens (<span class="math inline">\(S\)</span>), which is equivalent to amperes per volt (<span class="math inline">\(A\)</span>/<span class="math inline">\(V\)</span>). Historically, it was also measured in “mho”, which is “ohm” spelled backwards, reflecting its inverse relationship to resistance.</p>
<p>In field-effect transistors (FETs) the transconductance determines the device’s ability to amplify signals. A higher transconductance value indicates a stronger amplification capability, as a small change in input voltage can result in a significant change in output current.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Origin of the term transconductance
</div>
</div>
<div class="callout-body-container callout-body">
<p>The term transconductance originates from the concept of <strong>transfer conductance</strong>. It combines the ideas of <strong>transfer</strong>, indicating the transfer of a signal from the input to the output, and <strong>conductance</strong>, which is the inverse of resistance and measures how easily a material conducts electric current. In essence, transconductance describes how effectively a device can convert a voltage change at its input into a proportional current change at its output. <span class="citation" data-cites="gm_acakids">Kids (<a href="references.html#ref-gm_acakids" role="doc-biblioref">2025</a>)</span></p>
</div>
</div>
</section>
<section id="transistor-ota" class="level4" data-number="2.2.2.2">
<h4 data-number="2.2.2.2" class="anchored" data-anchor-id="transistor-ota"><span class="header-section-number">2.2.2.2</span> 5-Transistor OTA</h4>
<p><span class="citation" data-cites="hpretlacd">H. Pretl and Michael Koefinger (<a href="references.html#ref-hpretlacd" role="doc-biblioref">2025</a>)</span> introduces a basic 5-Transistor OTA as a design proposal for a real circuits.</p>
<div id="fig-5tota" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-5tota-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/basic_ota_output.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-5tota-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.4: <span class="citation" data-cites="hpretlacd">H. Pretl and Michael Koefinger (<a href="references.html#ref-hpretlacd" role="doc-biblioref">2025</a>)</span> ’s 5-Transistor OTA
</figcaption>
</figure>
</div>
<p>It consists of few elements which are going to be described in the next chapters. The basic function of this OTA can be described with: The transistors <span class="math inline">\(M_1\)</span> and <span class="math inline">\(M_2\)</span> form a differential pair, which is biased by the current source <span class="math inline">\(M_5\)</span>. Transistors <span class="math inline">\(M_5\)</span> and <span class="math inline">\(M_6\)</span> create a current mirror, where the input bias current <span class="math inline">\(I_{\text{bias}}\)</span> sets the bias current for the Operational Transconductance Amplifier. To keep the biasing current stable a current mirror (<a href="#sec-current_mirror" class="quarto-xref"><span>Section 2.2.3</span></a> is used instead of applying the <span class="math inline">\(I_{\text{bias}}\)</span> directly to <span class="math inline">\(M_5\)</span>. The differential pair (<a href="#sec-diff_pair" class="quarto-xref"><span>Section 2.2.4</span></a>) <span class="math inline">\(M_1\)</span> and <span class="math inline">\(M_2\)</span> is loaded by the current mirror <span class="math inline">\(M_3\)</span> and <span class="math inline">\(M_4\)</span>, which mirrors the drain current of <span class="math inline">\(M_1\)</span> to the right side of the circuit. The combined currents from <span class="math inline">\(M_4\)</span> and <span class="math inline">\(M_2\)</span> at the output node result in the generation of an output current. To archieve this desired result, it is important to ensure that <span class="math inline">\(M_{1,2}\)</span> and <span class="math inline">\(M_{3,4}\)</span> are symmetric, meaning they should have identical <span class="math inline">\(W\)</span> (width) and <span class="math inline">\(L\)</span> (length) dimensions. To set the right bias current, <span class="math inline">\(M_{5,6}\)</span> should be choosen accordingly.</p>
</section>
</section>
<section id="sec-current_mirror" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="sec-current_mirror"><span class="header-section-number">2.2.3</span> Current Mirror</h3>
<p>A current mirror consists of at least two transistors, one working as the input (reference) source and the other ones as copies of it. As the name suggests, the primary function of a current mirror is to copy the input current to the output, ensuring that the output current is an exact duplicate of the input. Importantly, the flow of the input current is unaffected by the size of the mirrored output current or any variations in it.</p>
<p>This behaviour is made possible by two key characteristics of the current mirror: its relatively low input resistance and its relatively high output resistance. The low input resistance ensures the input current remains stable regardless of drive conditions and the high output resistance maintains a constant output current independent of load variations. <span class="citation" data-cites="analog_university_current_mirror">Analog University (<a href="references.html#ref-analog_university_current_mirror" role="doc-biblioref">2024</a>)</span></p>
<div id="fig-current_mirror" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-current_mirror-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/current_mirror.png" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-current_mirror-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.5: MOSFET Current Mirror (taken from <span class="citation" data-cites="nerdsdostuff_current_mirror">Nerds Do Stuff (<a href="references.html#ref-nerdsdostuff_current_mirror" role="doc-biblioref">2024</a>)</span>)
</figcaption>
</figure>
</div>
<p>A current mirror is also capable of copying one current and convert it to multiple different outputs. This is possible by attaching more transistors with their gate <span class="math inline">\(G\)</span> to the drain <span class="math inline">\(D\)</span> of the reference transistor. By scaling the width and length of each output transistor different, multiple scales of the input current can be created. Hereby a big advantage is when using MOSFETS, due to the fact that no current is flowing through the Gate. In case of BJTs a compensation circuit is added. <span class="citation" data-cites="hpretlacd">H. Pretl and Michael Koefinger (<a href="references.html#ref-hpretlacd" role="doc-biblioref">2025</a>)</span></p>
</section>
<section id="sec-diff_pair" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="sec-diff_pair"><span class="header-section-number">2.2.4</span> Differential Pair</h3>
<p>A differential pair, also referred to as a differential amplifier, is an electronic circuit designed to compare the difference between two input voltages while minimizing any voltage that is common to both inputs. It consists of two transistors and can have two inputs and two outputs, as seen in <a href="#fig-diff_pair" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>.</p>
<div id="fig-diff_pair" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-diff_pair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/differential_pair.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diff_pair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.6: A differential pair <span class="citation" data-cites="hpretlacd">H. Pretl and Michael Koefinger (<a href="references.html#ref-hpretlacd" role="doc-biblioref">2025</a>)</span>
</figcaption>
</figure>
</div>
<p>Its primary function is to amplify the difference between two input signals while rejecting any common-mode signals, which are identical in both amplitude and phase at the two inputs. This property makes the differential pair highly effective in noise reduction and signal processing applications. In a typical differential pair using MOSFETs, the two transistors are matched in terms of their electrical characteristics, such as threshold voltage <span class="math inline">\(V_{th}\)</span> and transconductance <span class="math inline">\(g_m\)</span>. The inputs are applied to the gates <span class="math inline">\(G\)</span> of the MOSFETs, while the outputs are taken from the drains <span class="math inline">\(D\)</span>. A current source is usually connected to the sources <span class="math inline">\(S\)</span> of the MOSFETs to provide a constant bias current, here noted as <span class="math inline">\(g_{\text{tail}}\)</span> or like in <a href="#fig-5tota" class="quarto-xref">Figure&nbsp;<span>2.4</span></a> as <span class="math inline">\(I_{\text{bias}}\)</span>.</p>
<p>The differential gain of the pair is determined by the transconductance <span class="math inline">\(g_m\)</span> of the MOSFETs. The common-mode rejection ratio (CMRR) is a measure of the differential pair’s ability to reject common-mode signals. It is defined as the ratio of the differential gain to the common-mode gain and is typically expressed in decibels (dB). The performance of the differential pair is also influenced by the tail current source, represented by <span class="math inline">\(g_{\text{tail}}\)</span>. The tail current source provides a constant bias current <span class="math inline">\(I_{\text{bias}}\)</span> that flows through both transistors, ensuring that the total current through the differential pair remains constant regardless of the input voltages. <span class="citation" data-cites="razavi2024">Razavi (<a href="references.html#ref-razavi2024" role="doc-biblioref">2024</a>)</span></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Role in an OTA
</div>
</div>
<div class="callout-body-container callout-body">
<p>When used in OTAs, the differential pair serves as the input stage, where the differential input voltage is converted into a differential current.</p>
</div>
</div>
<!-- This is a Comment-->
</section>
</section>
<section id="mosfet-metal-oxide-semiconductor-field-effect-transistor" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="mosfet-metal-oxide-semiconductor-field-effect-transistor"><span class="header-section-number">2.3</span> MOSFET (Metal-Oxide-Semiconductor Field-Effect-Transistor )</h2>
<p>To dive in one more level, the parts an operational amplifier is build of are transistors. Precisely in this design process they are (MOSFETs). In integrated circuit design, where pre-built components are not available, MOSFETs can be designed from scratch. This design flexibility allows for the adjustment of the MOSFET’s physical dimensions, specifically its width <span class="math inline">\(W\)</span> and leght <span class="math inline">\(L\)</span>. By doing this there is a lot of room for freedom and experimental space. The length <span class="math inline">\(L\)</span> significantly influences MOSFET performance, enabling a trade-off between speed and output conductance. The width <span class="math inline">\(W\)</span> of a MOSFET acts as a scaling factor that adjusts the charge density within the channel, enabling the control of current levels to meet specific design requirements.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Circuit symbol of MOSFETs
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the literature, the circuit symbol of MOSFETs is not uniform. Some denote them with a small arrow between the gate (<span class="math inline">\(G\)</span>) and source (<span class="math inline">\(S\)</span>), which is not very precise due to the fact MOSFETs are symmetric. This means that the drain (<span class="math inline">\(D\)</span>) and source (<span class="math inline">\(S\)</span>) can be interchanged, and the names are only defined to make circuits clearer. Therefore, an accurate symbol for the n-MOS (shown in <a href="#fig-nmos" class="quarto-xref">Figure&nbsp;<span>2.7</span></a>) and p-MOS (shown in <a href="#fig-pmos" class="quarto-xref">Figure&nbsp;<span>2.8</span></a>) is shown in the following figures taken from <span class="citation" data-cites="hpretlacd">H. Pretl and Michael Koefinger (<a href="references.html#ref-hpretlacd" role="doc-biblioref">2025</a>)</span>:</p>
<div id="fig-nmos" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nmos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/nmos_symbol.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nmos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.7: n-MOSFET circuit symbol
</figcaption>
</figure>
</div>
<div id="fig-pmos" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pmos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/pmos_symbol.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pmos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.8: p-MOSFET circuit symbol
</figcaption>
</figure>
</div>
<p>However, in this development report, the symbols are not strictly used like shown here. But all of the used figures are based on this symmetric model of a MOSFET.</p>
<p>Besides, in many situations the bulk <span class="math inline">\(B\)</span> is connected to the source <span class="math inline">\(S\)</span> terminal. Thus the bulk <span class="math inline">\(B\)</span> is not mentioned in the circuit diagrams.</p>
</div>
</div>
<section id="mosfet-large-signal-regions" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="mosfet-large-signal-regions"><span class="header-section-number">2.3.1</span> MOSFET Large-Signal regions</h3>
<p>A MOSFET can operate in three different modes: Saturation, Linear (or Triode) region or Cutoff. The modes depend on the device’s threshold voltage <span class="math inline">\(V_{\text{th}}\)</span>, gate-to-source voltage <span class="math inline">\(V_{\text{GS}}\)</span>, and drain-to-source voltage <span class="math inline">\(V_{\text{DS}}\)</span>.</p>
<p><strong>Saturation</strong><br>
The saturation region is the active mode used for analog amplification , where the MOSFET behaves like a voltage-controlled current source . A conductive channel forms between the source and drain. This state is reached when the condition <span class="math inline">\(V_{\text{DS}} \geq (V_{\text{GS}} - V_{\text{th}})\)</span> is met. In saturation, the drain-source current (<span class="math inline">\(I_D\)</span>) stabilizes or “saturates” and becomes nearly independent of <span class="math inline">\(V_{\text{DS}}\)</span>. However, it can still be precisely controlled via <span class="math inline">\(V_{\text{GS}}\)</span> due to the phenomenon known as <a href="https://en.wikipedia.org/wiki/Channel_length_modulation">“pinch-off”</a></p>
<p><strong>Linear Region</strong><br>
The Linear, or Triode, region occurs when a MOSFET is conducting and acts more like a resistor or voltage-controlled device rather than a current source. This region is defined by the condition <span class="math inline">\(V_{\text{DS}} &lt; (V_{\text{GS}} - V_{\text{th}})\)</span> and <span class="math inline">\(V_{\text{GS}} &gt; V_{\text{th}}\)</span>. In this mode, both <span class="math inline">\(V_{\text{GS}}\)</span> and <span class="math inline">\(V_{\text{DS}}\)</span> control the <span class="math inline">\(I_D\)</span>, allowing the device to be used effectively for switching and amplification in low-voltage applications.</p>
<p><strong>Cutoff Region</strong><br>
In the cutoff region, the MOSFET is effectively turned off, with no conductive channel formed between the drain and source. This mode is reached when the gate-to-source voltage is less than the threshold voltage (<span class="math inline">\(V_{\text{GS}} &lt; V_{\text{th}}\)</span>). In cutoff, the drain-source current <span class="math inline">\(I_D\)</span> is nearly zero, which means the MOSFET is not conducting and behaves like an open switch.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the large-signal analysis, the transitions between operating modes occur gradually, making it challenging to pinpoint an exact moment when one mode shifts to another. Consequently, the modes are used in a more approximate manner, reflecting the continuous nature of these transitions rather than distinct, sharply defined states.</p>
</div>
</div>
</section>
<section id="small-signal-representation" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="small-signal-representation"><span class="header-section-number">2.3.2</span> Small-Signal Representation</h3>
<p>By applying different voltages to a MOSFET, different behaviours appear. But there is one thing which is very unliked by engineers and others, all these transfer functions are non linear. So making any calculations by hand is nearly impossible. That’s why in practise the biasing method exists. This is done by appying a dc voltage to the terminals of the MOSFET and during operation only a small signal change appears. With this technique an <strong>Operating Point</strong> is created, which enables to assume a linear behavior in its small signal area (like in <a href="#fig-mosfetoppoint" class="quarto-xref">Figure&nbsp;<span>2.9</span></a>). Because the MOSFET is put into an small operation point and all the changes applied are very small, this linearisation area is called <em>Small-signal model</em>.</p>
<div id="fig-mosfetoppoint" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mosfetoppoint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/mosfet_oppoint.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mosfetoppoint-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.9: MOSFET drain current vs.&nbsp;drain-to-source voltage for several values
</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important variables
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><strong><span class="math inline">\(I_D\)</span></strong>: The drain current</li>
<li><strong><span class="math inline">\(I_{\text{bias}}\)</span></strong>: The biasing current. The current to adjust the operating point</li>
<li><strong><span class="math inline">\(V_{GS}\)</span></strong>: The gate-to-source voltage</li>
<li><strong><span class="math inline">\(V_{DS}\)</span></strong>: The drain-to-source voltage</li>
<li><strong><span class="math inline">\(V_{th}\)</span></strong>: The threshold voltage. A critical parameter that defines the minimum gate-to-source voltage <span class="math inline">\(V_{GS}\)</span> required to form a conductive channel between the source and drain</li>
<li><strong><span class="math inline">\(V_{OV}\)</span></strong>: The overdrive voltage. the difference between the gate-to-sourcevoltage <span class="math inline">\(V_{GS}\)</span> and the threshold voltage <span class="math inline">\(V_{th}\)</span>.</li>
<li><strong><span class="math inline">\(g_m\)</span></strong>: The transconductance. The ratio between the output current and input voltage</li>
</ul>
</div>
</div>
<div id="fig-mosfetsmsi" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mosfetsmsi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/sec_theorectical_background/mosfet_smsi.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mosfetsmsi-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.10: MOSFET-Small Signal Model
</figcaption>
</figure>
</div>
<section id="capacitances-in-mosfets" class="level4" data-number="2.3.2.1">
<h4 data-number="2.3.2.1" class="anchored" data-anchor-id="capacitances-in-mosfets"><span class="header-section-number">2.3.2.1</span> Capacitances in MOSFETs</h4>
<p><strong>Gate-Source Capacitance (<span class="math inline">\(C_{gs}\)</span>):</strong><br>
<span class="math inline">\(C_{gs}\)</span> is the capacitance between the gate and source terminals. This arises due to the physical overlap of the gate and source regions, as well as the insulating oxide layer between them. <span class="math inline">\(C_{gs}\)</span> affects both the input impedance and the switching speed. Higher <span class="math inline">\(C_{gs}\)</span> values can slow down the switching process because more charge needs to be moved to change the gate voltage.</p>
<p><strong>Gate-Drain Capacitance (<span class="math inline">\(C_{gd}\)</span>):</strong><br>
<span class="math inline">\(C_{gd}\)</span> is the capacitance between the gate and drain terminals. People also know it as the Miller capacitance because of its significant impact on the Miller effect. The <a href="https://en.wikipedia.org/wiki/Miller_effect">Miller effect</a> amplifies the effective value of <span class="math inline">\(C_{gd}\)</span>, making it a critical factor in determining the high-frequency behaviour of the MOSFET. This capacitance can cause phase shifts and affect the stability of the circuit, particularly in amplifiers.</p>
<p><strong>Drain-Source Capacitance (<span class="math inline">\(C_{ds}\)</span>):</strong><br>
<span class="math inline">\(C_{ds}\)</span> is the capacitance between the drain and source terminals. It arises due to the depletion region between the drain and source regions. <span class="math inline">\(C_{ds}\)</span> affects the output impedance and frequency response of the circuit. Higher drain-source capacitance can lead to increased output capacitance, affecting the switching speed and introducing additional losses.</p>
</section>
<section id="transconductances-in-mosfet" class="level4" data-number="2.3.2.2">
<h4 data-number="2.3.2.2" class="anchored" data-anchor-id="transconductances-in-mosfet"><span class="header-section-number">2.3.2.2</span> Transconductances in MOSFET</h4>
<p><strong>Output Conductance (<span class="math inline">\(g_{ds})\)</span></strong><br>
<span class="math inline">\(g_{ds}\)</span> represents the small-signal conductance between the drain and source terminals of the MOSFET. It expresses how the drain current <span class="math inline">\(I_D\)</span> changes with respect to the drain-source voltage <span class="math inline">\(V_{ds}\)</span> when the gate-source voltage <span class="math inline">\(V_{gs}\)</span> is held constant. Mathematically, it is defined as follows:</p>
<p><span class="math inline">\(g_{ds}=\frac{\partial I_D}{\partial V_{ds}}\bigg|_{V_{gs}=\text{constant}}\)</span></p>
<p><span class="math inline">\(g_{ds}\)</span> affects the output impedance of the MOSFET. A higher <span class="math inline">\(g_{ds}\)</span> results in a lower output impedance.In saturation region, <span class="math inline">\(g_{ds}\)</span> is typically small, which helps maintain the linearity of the device. However, in the triode region, <span class="math inline">\(g_{ds}\)</span> can be larger, leading to non-linear behavior.</p>
<p><strong>Mutual Transconductance - Gate-Source Voltage (<span class="math inline">\(g_mv_{gs}\)</span>)</strong><br>
The transconductance <span class="math inline">\(g_m\)</span> of a MOSFET quantifies how the drain current <span class="math inline">\(I_D\)</span> varies in response to changes in the gate-source voltage <span class="math inline">\(V_{gs}\)</span>, while keeping the drain-source voltage <span class="math inline">\(V_{ds}\)</span> constant.</p>
<p><span class="math inline">\(g_m=\frac{\partial I_D}{\partial V_{gs}}\bigg|_{V_{ds}=\text{constant}}\)</span></p>
<p>The term <span class="math inline">\(g_mv_{gs}\)</span> represents the small-signal current generated by the transconductance <span class="math inline">\(g_m\)</span> in response to a small change in the gate-source voltage <span class="math inline">\(v_{gs}\)</span>. A higher <span class="math inline">\(g_m\)</span> results in a higher voltage gain.</p>
</section>
</section>
</section>
<section id="summary-of-g_mv_gs" class="level2 callout-info" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="summary-of-g_mv_gs"><span class="header-section-number">2.4</span> Summary of <span class="math inline">\(g_mv_{gs}\)</span></h2>
<p>In the saturation region, the output conductance <span class="math inline">\(g_{ds}\)</span> is generally much smaller then the transconductance <span class="math inline">\(g_m\)</span>. This characteristic enables the MOSFET to function effectively as a voltage-controlled current source. However, as the MOSFET moves into the triode region, <span class="math inline">\(g_{ds}\)</span> increases, causing the device to behave more like to a resistor. The output conductance <span class="math inline">\(g_{ds}\)</span> influences the output impedance and linearity of the device, while the product <span class="math inline">\(g_mv_{gs}\)</span> controls the gain and frequency response of the circuit.</p>
</section>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-analog_university_current_mirror" class="csl-entry" role="listitem">
Analog University. 2024. <span>“Chapter 11: Current Mirror.”</span> <a href="https://wiki.analog.com/university/courses/electronics/text/chapter-11 ">https://wiki.analog.com/university/courses/electronics/text/chapter-11 </a>.
</div>
<div id="ref-hpretlacd" class="csl-entry" role="listitem">
H. Pretl and Michael Koefinger. 2025. <span>“<span>Analog Circuit Design</span>.”</span> <a href="https://iic-jku.github.io/analog-circuit-design/" class="uri">https://iic-jku.github.io/analog-circuit-design/</a>.
</div>
<div id="ref-gm_acakids" class="csl-entry" role="listitem">
Kids, Academic. 2025. <span>“Transconductance.”</span> <a href="https://academickids.com/encyclopedia/index.php/Transconductance">https://academickids.com/encyclopedia/index.php/Transconductance</a>.
</div>
<div id="ref-nerdsdostuff_current_mirror" class="csl-entry" role="listitem">
Nerds Do Stuff. 2024. <span>“Current Mirror: Working and Circuit.”</span> <a href="https://nerdsdostuff.com/electronic_circuits/current-mirror-working-and-circuit/ ">https://nerdsdostuff.com/electronic_circuits/current-mirror-working-and-circuit/ </a>.
</div>
<div id="ref-aslkpro2012" class="csl-entry" role="listitem">
Rao, K. R. K., and C. P. Ravikumar. 2012. <em>Analog System Lab Kit PRO MANUAL</em>. Texas Instruments.
</div>
<div id="ref-razavi2018" class="csl-entry" role="listitem">
Razavi, Behzad. 2018. <span>“The Biquadratic Filter.”</span> <em>IEEE Solid-State Circuit Magazine</em>, 11–16.
</div>
<div id="ref-razavi2024" class="csl-entry" role="listitem">
———. 2024. <span>“The Design of a Biquadratic Filter.”</span> <em>IEEE Solid-State Circuit Magazine</em>, 6–13.
</div>
<div id="ref-Approximating_OPAMP" class="csl-entry" role="listitem">
Schmid, H. 2000. <span>“Approximating the Universal Active Element.”</span> <em>IEEE Transactions on Circuits and Systems II: Analog and Digital Signal Processing</em> 47 (11): 1160–69. <a href="https://doi.org/10.1109/82.885124">https://doi.org/10.1109/82.885124</a>.
</div>
<div id="ref-Wangenheim2007" class="csl-entry" role="listitem">
Wangenheim, Lutz v. 2007. <em>Aktive Filter Und Oszillatoren: Entwurf Und Schaltungstechnik Mit Integrierten Bausteinen</em>. Berlin: Springer-Verlag.
</div>
<div id="ref-wiki_opams" class="csl-entry" role="listitem">
Wikipedia. 2025. <span>“Operationsverstärker.”</span> <a href="https://de.wikipedia.org/wiki/Operationsverst%C3%A4rker">https://de.wikipedia.org/wiki/Operationsverst%C3%A4rker</a>.
</div>
</div>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/avahlen\.github\.io\/AMCD_Group1\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../content/_sec_introduction.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../content/_sec_characterisation.html" class="pagination-link" aria-label="Characterisation">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Characterisation</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>